{% extends "base.html" %}
{% block title %}Post{% endblock %}
{% block body %}
  <div class="col-lg-12 shadow p-3 mb-2 bg-body rounded" style="margin-top: 75px;">
    <h4>{{ post.title }}</h4>
    {{ post.text }}
  </div>
  <p>
    Author: {{ post.user_id }}
    <br>
    Tags:
    {% for tag in post.tags %}
      <a href="{{ url_for('tag', tag_name=tag.title) }}">{{ tag.title }}</a>
      {% if loop.last %}
      {% else %}, {% endif %}
    {% endfor %}
  </p>
  <div class="col-lg-12 shadow p-3 mb-5 bg-body rounded" style="margin-top: 50px;">
    <h3>New comment:</h3>
    <form method="POST" action="{{ url_for('post', post_id=post.id) }}">
      {{ form.hidden_tag() }}
      <div class="form-group">
        {{ form.name.label }}
        {% if form.name.errors %}
          {% for e in form.name.errors %}
            <p class="help-block">{{ e }}</p>
          {% endfor %}
        {% endif %}
        {{ form.name(class_='form-control') }}
      </div>
      <div class="form-group">
        {{ form.text.label }}
        {% if form.text.errors %}
          {% for e in form.text.errors %}
            <p class="help-block">{{ e }}</p>
          {% endfor %}
        {% endif %}
        {{ form.text(class_='form-control') }}
      </div>
      <input class="btn btn-primary" type="submit" value="Add comment" style="margin-top: 15px;">
    </form>
  </div>
  <div class="col-lg-12">
  {% for comment in comments.items %}
    <div class="row shadow-none p-3 mb-3 bg-light rounded">
      <p>By: {{ comment.name }} on {{ comment.dt }}</p>
      <p>{{ comment.text | truncate(255) | safe }}</p>
    </div>
  {% endfor %}
  {{ render_pagination(comments, 'post', post_id=post.id) }}
  </div>
{% endblock %}
